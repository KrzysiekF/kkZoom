!function(t,s,e,r){"use strict";function i(s,e){this.element=s,this.settings=t.extend({},n,e),this._defaults=n,this._name=o,this.scrollRange=null,this.cssArgsBefore={},this.cssArgsAfter={},this.currentCss={},this.scrollFromTop=null,this.scrollFromLeft=null,this.beforeProp=null,this.afterProp=null,this.init()}var o="kkScrollAnimate",n={scrollContent:t(s),startFromElement:!1,scrollType:"vertical",startScroll:0,endScroll:0,cssProperty:"",before:0,after:0,unit:""};t.extend(i.prototype,{init:function(){var t=this;this.setData(),this.startFromElement(),this.transformProperty(),this.settings.scrollContent.on("scroll",function(){t.onScroll()})},setData:function(){this.scrollRange=this.settings.endScroll-this.settings.startScroll,this.cssArgsBefore[this.settings.cssProperty]=this.settings.before+this.settings.unit,this.cssArgsAfter[this.settings.cssProperty]=this.settings.after+this.settings.unit},startFromElement:function(){if(this.settings.startFromElement){var e=t(this.settings.startFromElement),r=e.offset(),i=r.top,o=r.left,n=t(s).width(),h=t(s).height();this.scrollFromTop=i-h,this.scrollFromLeft=o-n,t(s).bind("resize",function(){n=t(s).width(),h=t(s).height(),_this.scrollFromTop=i-h,_this.scrollFromLeft=o-n})}},transformProperty:function(){"transform"==this.settings.cssProperty&&(this.cssArgsBefore["-webkit-transform"]=this.settings.before,this.cssArgsAfter["-webkit-transform"]=this.settings.after,this.cssArgsBefore["-moz-transform"]=this.settings.before,this.cssArgsAfter["-moz-transform"]=this.settings.after,this.settings.before.indexOf("deg")!=-1?(this.beforeProp=this.settings.before.split("("),this.beforeProp=this.beforeProp[1].split("deg"),this.beforeProp=parseFloat(this.beforeProp[0]),this.afterProp=this.settings.after.split("("),this.afterProp=this.afterProp[1].split("deg"),this.afterProp=parseFloat(this.afterProp[0])):this.settings.before.indexOf("scale")!=-1&&(this.beforeProp=this.settings.before.split("("),this.beforeProp=this.beforeProp[1].split(")"),this.beforeProp=parseFloat(this.beforeProp[0]),this.afterProp=this.settings.after.split("("),this.afterProp=this.afterProp[1].split(")"),this.afterProp=parseFloat(this.afterProp[0])))},onScroll:function(){var s=null;"vertical"==this.settings.scrollType?(s=this.settings.scrollContent.scrollTop(),this.settings.startFromElement&&(s-=this.scrollFromTop)):"horizontal"==this.settings.scrollType&&(s=this.settings.scrollContent.scrollLeft(),this.settings.startFromElement&&(s-=this.scrollFromLeft));var e=(s-this.settings.startScroll)/this.scrollRange;if(s<this.settings.startScroll)"add-class"===this.settings.cssProperty?t(this.element).removeClass(this.cssArgsAfter["add-class"]):t(this.element).css(this.cssArgsBefore);else if(s>this.settings.endScroll)t(this.element).css(this.cssArgsAfter);else if("add-class"===this.settings.cssProperty)t(this.element).addClass(this.cssArgsAfter["add-class"]);else if("transform"==this.settings.cssProperty){var r=this.beforeProp+(this.afterProp-this.beforeProp)*e;if(this.settings.before.indexOf("rotate")!=-1)var i="rotate("+r+"deg)";else if(this.settings.before.indexOf("skew")!=-1)var i="skew("+r+"deg)";else if(this.settings.before.indexOf("scale")!=-1)var i="scale("+r+")";this.currentCss[this.settings.cssProperty]=i,this.currentCss.transform=i,this.currentCss["-moz-transform"]=i,this.currentCss["-webkit-transform"]=i,t(this.element).css(this.currentCss)}else this.currentCss.transform="translateZ(0)",this.currentCss["-moz-transform"]="translateZ(0)",this.currentCss["-webkit-transform"]="translateZ(0)",this.currentCss[this.settings.cssProperty]=this.settings.before+(this.settings.after-this.settings.before)*e+this.settings.unit,t(this.element).css(this.currentCss)}}),t.fn[o]=function(s){return this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new i(this,s))})}}(jQuery,window,document);